import _extends from"babel-runtime/helpers/extends";import _objectWithoutProperties from"babel-runtime/helpers/objectWithoutProperties";import _classCallCheck from"babel-runtime/helpers/classCallCheck";import _possibleConstructorReturn from"babel-runtime/helpers/possibleConstructorReturn";import _inherits from"babel-runtime/helpers/inherits";import React,{Component}from"react";import _regeneratorRuntime from"babel-runtime/regenerator";import _Promise from"babel-runtime/core-js/promise";import _asyncToGenerator from"babel-runtime/helpers/asyncToGenerator";import ReactFiberReconciler from"react-reconciler";import emptyObject from"fbjs/lib/emptyObject";import PDFDocument,{PDFFont}from"@react-pdf/pdfkit";import _createClass from"babel-runtime/helpers/createClass";import _Object$keys from"babel-runtime/core-js/object/keys";import isUrl from"is-url";import fontkit from"@react-pdf/fontkit";import fetch from"isomorphic-fetch";import _Array$from from"babel-runtime/core-js/array/from";import emojiRegex from"emoji-regex";import{Attachment,AttributedString,Container,LayoutEngine,Path,Rect}from"@react-pdf/textkit-core";import scriptItemizer from"@react-pdf/script-itemizer";import justificationEngine from"@textkit/justification-engine";import textDecorationEngine from"@textkit/text-decoration-engine";import lineFragmentGenerator from"@textkit/line-fragment-generator";import _getIterator from"babel-runtime/core-js/get-iterator";import createLinebreaker from"@textkit/linebreaker";import english from"hyphenation.en-us";import Hypher from"hypher";import _JSON$stringify from"babel-runtime/core-js/json/stringify";import _typeof from"babel-runtime/helpers/typeof";import PNG from"@react-pdf/png-js";import _Object$assign from"babel-runtime/core-js/object/assign";import warning from"fbjs/lib/warning";import Yoga from"yoga-layout";import toPairsIn from"lodash.topairsin";import isFunction from"lodash.isfunction";import upperFirst from"lodash.upperfirst";import pick from"lodash.pick";import merge from"lodash.merge";import matchMedia from"media-engine";import createPDFRenderer from"@textkit/pdf-renderer";import BlobStream from"blob-stream";var inheritedProperties=["color","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","textAlign","visibility","wordSpacing"],flatStyles=function(t){return t.reduce(function(t,e){return _extends({},t,e)},{})},standardFonts=["Courier","Courier-Bold","Courier-Oblique","Helvetica","Helvetica-Bold","Helvetica-Oblique","Times-Roman","Times-Bold","Times-Italic"],Buffer=require("buffer/").Buffer,fetchFont=function(t){return fetch(t).then(function(t){return t.buffer?t.buffer():t.arrayBuffer()}).then(function(t){return Buffer.from(t)})},fonts={},emojiSource=void 0,hyphenationCallback=void 0,register=function(t,e){var r=e.family,i=_objectWithoutProperties(e,["family"]);fonts[r]=_extends({src:t,loaded:!1,loading:!1,data:null},i)},registerHyphenationCallback=function(t){hyphenationCallback=t},registerEmojiSource=function(t){var e=t.url,r=t.format;emojiSource={url:e,format:void 0===r?"png":r}},getRegisteredFonts=function(){return _Object$keys(fonts)},getFont=function(t){return fonts[t]},getEmojiSource=function(){return emojiSource},getHyphenationCallback=function(){return hyphenationCallback},load=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(e,r){var i,n;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=fonts[e])||i.data||i.loading){t.next=11;break}if(i.loading=!0,!isUrl(i.src)){t.next=10;break}return t.next=6,fetchFont(i.src);case 6:n=t.sent,i.data=fontkit.create(n),t.next=11;break;case 10:i.data=fontkit.openSync(i.src);case 11:if(i&&!i.loaded&&(i.loaded=!0,r.registerFont(e,i.data)),i||standardFonts.includes(e)){t.next=14;break}throw new Error("Font family not registered: "+e+". Please register it calling Font.register() method.");case 14:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),reset=function(){for(var t in fonts)fonts.hasOwnProperty(t)&&(fonts[t].loaded=!1)},clear=function(){fonts={}},Font={register:register,getEmojiSource:getEmojiSource,getRegisteredFonts:getRegisteredFonts,registerEmojiSource:registerEmojiSource,registerHyphenationCallback:registerHyphenationCallback,getHyphenationCallback:getHyphenationCallback,getFont:getFont,load:load,clear:clear,reset:reset},StandardFont=function(){function t(e){_classCallCheck(this,t),this.name=e,this.src=PDFFont.open(null,e),this.glyphs={}}return t.prototype.layout=function(t){var e=this,r=this.src.encode(t),i=r[0],n=r[1];return{positions:n,stringIndices:n.map(function(t,e){return e}),glyphs:i.map(function(t,r){var i=e.getGlyph(parseInt(t,16));return i.advanceWidth=n[r].advanceWidth,i})}},t.prototype.glyphForCodePoint=function(t){var e=this.getGlyph(t);return e.advanceWidth=400,e},t.prototype.getGlyph=function(t){return this.glyphs[t]||(this.glyphs[t]=this.src.font.characterToGlyph(t)),{id:t,_font:this.src,name:this.glyphs[t]}},t.prototype.hasGlyphForCodePoint=function(t){return".notdef"!==this.src.font.characterToGlyph(t)},_createClass(t,[{key:"ascent",get:function(){return this.src.ascender}},{key:"descent",get:function(){return this.src.descender}},{key:"lineGap",get:function(){return this.src.lineGap}},{key:"unitsPerEm",get:function(){return 1e3}}]),t}(),fontSubstitutionEngine=function(){return function(t){var e=t.Run;return function(){function t(){_classCallCheck(this,t),this.fallbackFontInstance=null}return t.prototype.getRuns=function(t,r){var i=[],n=null,o=0,a=0,s=r,h=Array.isArray(s),u=0;for(s=h?s:_getIterator(s);;){var l;if(h){if(u>=s.length)break;l=s[u++]}else{if((u=s.next()).done)break;l=u.value}var c=l,p=void 0;if(p="string"==typeof c.attributes.font?new StandardFont(c.attributes.font):c.attributes.font,0===t.length){i.push(new e(0,0,{font:p}));break}var d=t.slice(c.start,c.end),f=Array.isArray(d),g=0;for(d=f?d:_getIterator(d);;){var m;if(f){if(g>=d.length)break;m=d[g++]}else{if((g=d.next()).done)break;m=g.value}var y=m,b=y.codePointAt(),_=p;!p.hasGlyphForCodePoint(b)&&this.fallbackFont.hasGlyphForCodePoint(b)&&(_=this.fallbackFont),_!==n&&(n&&i.push(new e(o,a,{font:n})),n=_,o=a),a+=y.length}}return o<t.length&&i.push(new e(o,t.length,{font:n})),i},_createClass(t,[{key:"fallbackFont",get:function(){return this.fallbackFontInstance||(this.fallbackFontInstance=new StandardFont("Helvetica")),this.fallbackFontInstance}}]),t}()}},Node=function(){function t(e){_classCallCheck(this,t),this.prev=null,this.next=null,this.data=e}return t.prototype.toString=function(){return this.data.toString()},t}(),LinkedList=function(){function t(){_classCallCheck(this,t),this.head=null,this.tail=null,this.listSize=0}return t.prototype.isLinked=function(t){return!(t&&null===t.prev&&null===t.next&&this.tail!==t&&this.head!==t||this.isEmpty())},t.prototype.size=function(){return this.listSize},t.prototype.isEmpty=function(){return 0===this.listSize},t.prototype.first=function(){return this.head},t.prototype.last=function(){return this.last},t.prototype.toString=function(){return this.toArray().toString()},t.prototype.toArray=function(){for(var t=this.head,e=[];null!==t;)e.push(t),t=t.next;return e},t.prototype.forEach=function(t){for(var e=this.head;null!==e;)t(e),e=e.next},t.prototype.contains=function(t){var e=this.head;if(!this.isLinked(t))return!1;for(;null!==e;){if(e===t)return!0;e=e.next}return!1},t.prototype.at=function(t){var e=this.head,r=0;if(t>=this.listLength||t<0)return null;for(;null!==e;){if(t===r)return e;e=e.next,r+=1}return null},t.prototype.insertAfter=function(t,e){return this.isLinked(t)?(e.prev=t,e.next=t.next,null===t.next?this.tail=e:t.next.prev=e,t.next=e,this.listSize+=1,this):this},t.prototype.insertBefore=function(t,e){return this.isLinked(t)?(e.prev=t.prev,e.next=t,null===t.prev?this.head=e:t.prev.next=e,t.prev=e,this.listSize+=1,this):this},t.prototype.push=function(t){return null===this.head?this.unshift(t):this.insertAfter(this.tail,t),this},t.prototype.unshift=function(t){return null===this.head?(this.head=t,this.tail=t,t.prev=null,t.next=null,this.listSize+=1):this.insertBefore(this.head,t),this},t.prototype.remove=function(t){return this.isLinked(t)?(null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this.listSize-=1,this):this},t.prototype.pop=function(){var t=this.tail;return this.tail.prev.next=null,this.tail=this.tail.prev,this.listSize-=1,t.prev=null,t.next=null,t},t.prototype.shift=function(){var t=this.head;return this.head.next.prev=null,this.head=this.head.next,this.listSize-=1,t.prev=null,t.next=null,t},t}();LinkedList.Node=Node;var linebreak=function t(e,r,i){var n={demerits:{line:i&&i.demerits&&i.demerits.line||10,flagged:i&&i.demerits&&i.demerits.flagged||100,fitness:i&&i.demerits&&i.demerits.fitness||3e3},tolerance:i&&i.tolerance||3},o=new LinkedList,a={width:0,stretch:0,shrink:0},s=r,h=[],u={data:{demerits:1/0}};function l(t,e,r,i,n,o,a){return{position:t,demerits:e,ratio:r,line:i,fitnessClass:n,totals:o||{width:0,stretch:0,shrink:0},previous:a}}function c(r,i,n,o){var h=a.width-n.totals.width,u=0,l=0,c=o<s.length?s[o-1]:s[s.length-1];return"penalty"===e[i].type&&(h+=e[i].width),h<c?(u=a.stretch-n.totals.stretch)>0?(c-h)/u:t.infinity:h>c?(l=a.shrink-n.totals.shrink)>0?(c-h)/l:t.infinity:0}function p(r){for(var i={width:a.width,stretch:a.stretch,shrink:a.shrink},n=r;n<e.length;n+=1)if("glue"===e[n].type)i.width+=e[n].width,i.stretch+=e[n].stretch,i.shrink+=e[n].shrink;else if("box"===e[n].type||"penalty"===e[n].type&&e[n].penalty===-t.infinity&&n>r)break;return i}function d(e,r,i){for(var a=o.first(),s=null,h=0,u=0,d=[],f=void 0,g=0,m=void 0,y=0,b=void 0,_=void 0,E=void 0;null!==a;){for(d=[{demerits:1/0},{demerits:1/0},{demerits:1/0},{demerits:1/0}];null!==a&&(s=a.next,g=a.data.line+1,((h=c(a.data.position,r,a.data,g))<-1||"penalty"===e.type&&e.penalty===-t.infinity)&&o.remove(a),h>=-1&&h<=n.tolerance&&(f=100*Math.pow(Math.abs(h),3),u="penalty"===e.type&&e.penalty>=0?Math.pow(n.demerits.line+f,2)+Math.pow(e.penalty,2):"penalty"===e.type&&e.penalty!==-t.infinity?Math.pow(n.demerits.line+f,2)-Math.pow(e.penalty,2):Math.pow(n.demerits.line+f,2),"penalty"===e.type&&"penalty"===i[a.data.position].type&&(u+=n.demerits.flagged*e.flagged*i[a.data.position].flagged),y=h<-.5?0:h<=.5?1:h<=1?2:3,Math.abs(y-a.data.fitnessClass)>1&&(u+=n.demerits.fitness),(u+=a.data.demerits)<d[y].demerits&&(d[y]={active:a,demerits:u,ratio:h})),!(null!==(a=s)&&a.data.line>=g)););for(m=p(r),b=0;b<d.length;b+=1)(_=d[b]).demerits<1/0&&(E=new LinkedList.Node(l(r,_.demerits,_.ratio,_.active.data.line+1,b,m,_.active)),null!==a?o.insertBefore(a,E):o.push(E))}}if(o.push(new LinkedList.Node(l(0,0,0,0,0,void 0,null))),e.forEach(function(e,r,i){"box"===e.type?a.width+=e.width:"glue"===e.type?(r>0&&"box"===i[r-1].type&&d(e,r,i),a.width+=e.width,a.stretch+=e.stretch,a.shrink+=e.shrink):"penalty"===e.type&&e.penalty!==t.infinity&&d(e,r,i)}),0!==o.size()){for(o.forEach(function(t){t.data.demerits<u.data.demerits&&(u=t)});null!==u;)h.push({position:u.data.position,ratio:u.data.ratio}),u=u.data.previous;return h.reverse()}return[]};linebreak.infinity=1e4,linebreak.glue=function(t,e,r){return{type:"glue",width:t,stretch:e,shrink:r}},linebreak.box=function(t,e){return{type:"box",width:t,value:e,hyphenated:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},linebreak.penalty=function(t,e,r){return{type:"penalty",width:t,penalty:e,flagged:r}};var SOFT_HYPHEN_HEX="­",NO_BREAK_SPACE_DECIMAL=160,getWords=function(t){var e=[],r=t.start,i=0,n=t,o=Array.isArray(n),a=0;for(n=o?n:_getIterator(n);;){var s;if(o){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var h=s.index;if(t.codePointAtGlyphIndex(h)!==NO_BREAK_SPACE_DECIMAL&&t.isWhiteSpace(h-r)){var u=t.slice(i,h-r);u.length>0&&e.push(u),i=h-r+1}}if(i<t.end){var l=t.slice(i,t.end-t.start);e.push(l)}return e},h=new Hypher(english),hyphenateString=function(t){return t.includes(SOFT_HYPHEN_HEX)?t.split(SOFT_HYPHEN_HEX):h.hyphenate(t)},hyphenateWord=function(t){var e=0;return hyphenateString(t.string).map(function(r){var i=t.slice(e,e+r.length);return e+=r.length,i})},hyphenate=function(t){return t.map(function(t){return hyphenateWord(t)})},formatter=function(t,e,r){var i=t(" "),n=t("-"),o=e&&"justify"!==e?600:100,a=3,s=6,h=9;return function(e){var u=[],l=getWords(e),c=i*a/s,p=i*a/h;return(r||hyphenate)(l,e).forEach(function(e,r,a){e.length>1?e.forEach(function(r,i,a){var s=i===e.length-1;u.push(linebreak.box(t(r),r,!s)),i!==a.length-1&&u.push(linebreak.penalty(n,o,1))}):u.push(linebreak.box(t(e[0]),e[0])),r===a.length-1?(u.push(linebreak.glue(0,linebreak.infinity,0)),u.push(linebreak.penalty(0,-linebreak.infinity,1))):u.push(linebreak.glue(i,c,p))}),u}},HYPHEN=45,TOLERANCE_LIMIT=40,lineBreaker=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hyphenationCallback;return function(e){var r=new(createLinebreaker()(e));return function(){function e(t){_classCallCheck(this,e),this.tolerance=t||4}return e.prototype.suggestLineBreak=function(e,i,n){for(var o=this.tolerance,a=this.measureWidth(e),s=formatter(a,n.align,t)(e),h=[];0===h.length&&o<TOLERANCE_LIMIT;)h=linebreak(s,[i],{tolerance:o}),o+=2;if(0===h.length){var u=r.suggestLineBreak(e,i,n);if(u)return u;var l=e.glyphIndexAtOffset(i)-1;return e.insertGlyph(l,HYPHEN),{position:l+1}}if(!h[1])return{position:e.end};var c=this.findBreakNode(s,h[1].position),p=c.value.end-e.start;return c.hyphenated?(e.insertGlyph(p,HYPHEN),{position:p+1}):{position:p+(e.isWhiteSpace(p)?1:0)}},e.prototype.measureWidth=function(t){var e=t.glyphRuns[0].attributes,r=e.font,i=e.fontSize;return function(t){if("string"==typeof t){var e=i/r.unitsPerEm;return r.layout(t).positions[0].xAdvance*e}return t.advanceWidth}},e.prototype.findBreakNode=function(t,e){for(var r=e-1;!t[r].value;)r-=1;return t[r]},e}()}},shrinkWhitespaceFactor={before:-.5,after:-.5},LayoutEngine$1=function(t){function e(r){var i=r.hyphenationCallback;_classCallCheck(this,e);var n={scriptItemizer:scriptItemizer(),decorationEngine:textDecorationEngine(),lineFragmentGenerator:lineFragmentGenerator(),fontSubstitutionEngine:fontSubstitutionEngine(),lineBreaker:lineBreaker({hyphenationCallback:i}),justificationEngine:justificationEngine({shrinkWhitespaceFactor:shrinkWhitespaceFactor})};return _possibleConstructorReturn(this,t.call(this,n))}return _inherits(e,t),e}(LayoutEngine),MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],JPEG=function t(e){if(_classCallCheck(this,t),this.data=null,this.width=null,this.height=null,this.data=e,65496!==e.readUInt16BE(0))throw new Error("SOI not found in JPEG");for(var r=void 0,i=2;i<e.length&&(r=e.readUInt16BE(i),i+=2,!MARKERS.includes(r));)i+=e.readUInt16BE(i);if(!MARKERS.includes(r))throw new Error("Invalid JPEG.");i+=3,this.height=e.readUInt16BE(i),i+=2,this.width=e.readUInt16BE(i)},Buffer$1=require("buffer/").Buffer;function getImage(t,e){switch(e.toLowerCase()){case"jpg":case"jpeg":return new JPEG(t);case"png":return new PNG(t);default:return null}}var fetchImage=function(t){if("object"===(void 0===t?"undefined":_typeof(t))){if(t.data&&t.format)return new _Promise(function(e,r){return e(getImage(t.data,t.format))});throw new Error("Invalid data given for local file: "+_JSON$stringify(t))}return fetch(t).then(function(t){return t.buffer?t.buffer():t.arrayBuffer()}).then(function(t){return"Buffer"===t.constructor.name?t:Buffer$1.from(t)}).then(function(t){var e=137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7],r=255===t[0]&&216===t[1]&&255===t[2],i="";if(e)i="png";else{if(!r)throw new Error("Not valid image extension");i="jpg"}return getImage(t,i)}).catch(function(){throw new Error("Couldn't fetch image: "+t)})},emojis={},regex=emojiRegex(),reflect=function(t){return function(){return t.apply(void 0,arguments).then(function(t){return t},function(t){return t})}},fetchEmojiImage=reflect(fetchImage),getCodePoints=function(t){return _Array$from(t).map(function(t){return t.codePointAt(0).toString(16)}).join("-")},buildEmojiUrl=function(t){var e=Font.getEmojiSource(),r=e.url,i=e.format;return""+r+getCodePoints(t)+"."+i},fetchEmojis=function(t){var e=Font.getEmojiSource();if(!e||!e.url)return[];for(var r=[],i=void 0,n=function(){var t=i[0];if(!emojis[t]||emojis[t].loading){var e=buildEmojiUrl(t);emojis[t]={loading:!0},r.push(fetchEmojiImage(e).then(function(e){emojis[t].loading=!1,emojis[t].data=e.data}))}};i=regex.exec(t);)n();return r},embedEmojis=function(t){for(var e=[],r=0;r<t.length;r++){for(var i=t[r],n=void 0,o=0;n=regex.exec(i.string);){var a=n.index,s=n[0],h=i.attributes.fontSize,u=i.string.slice(o,a+n[0].length);emojis[s]&&emojis[s].data?e.push({string:u.replace(n,Attachment.CHARACTER),attributes:_extends({},i.attributes,{attachment:new Attachment(h,h,{yOffset:Math.floor(.1*h),image:emojis[s].data})})}):e.push({string:u.replace(n,String.fromCharCode(0)),attributes:i.attributes}),o=a+s.length}o<i.string.length&&e.push({string:i.string.slice(o),attributes:i.attributes})}return e},Document$2=function(){function t(e,r){_classCallCheck(this,t),this.root=e,this.props=r,this.children=[]}return t.prototype.appendChild=function(t){t.parent=this,t.previousPage=this.children[this.children.length-1],this.children.push(t)},t.prototype.removeChild=function(t){var e=this.children.indexOf(t);t.parent=null,this.children[e+1]&&(this.children[e+1].previousPage=this.children[e].previousPage),this.children.slice(e,1)},t.prototype.addMetaData=function(){var t=this.props,e=t.title,r=t.author,i=t.subject,n=t.keywords,o=t.creator,a=t.producer;e&&(this.root.info.Title=e),r&&(this.root.info.Author=r),i&&(this.root.info.Subject=i),n&&(this.root.info.Keywords=n),this.root.info.Creator=o||"react-pdf",this.root.info.Producer=a||"react-pdf"},t.prototype.loadFonts=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e,r,i;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)(i=r.shift()).style&&i.style.fontFamily&&e.push(Font.load(i.style.fontFamily,this.root)),i.children&&i.children.forEach(function(t){r.push(t)});return t.next=5,_Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.loadEmojis=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e,r,i;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)"string"==typeof(i=r.shift())?e.push.apply(e,fetchEmojis(i)):i.children&&i.children.forEach(function(t){r.push(t)});return t.next=5,_Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.loadImages=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e,r,i;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)"Image"===(i=r.shift()).name&&e.push(i.fetch()),i.children&&i.children.forEach(function(t){r.push(t)});return t.next=5,_Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.loadAssets=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_Promise.all([this.loadFonts(),this.loadImages()]);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.applyProps=function(){for(var t=0;t<this.children.length;t++)this.children[t].applyProps()},t.prototype.wrapChildren=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.children.length)){t.next=7;break}return t.next=4,this.children[e].wrapPage();case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.renderChildren=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.children.length)){t.next=7;break}return t.next=4,this.children[e].render();case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.addMetaData(),this.applyProps(),t.next=5,this.loadEmojis();case 5:return t.next=7,this.loadAssets();case 7:return t.next=9,this.wrapChildren();case 9:return t.next=11,this.renderChildren();case 11:this.root.end(),Font.reset(),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(0),t.t0;case 18:case"end":return t.stop()}},t,this,[[0,15]])}));return function(){return t.apply(this,arguments)}}(),_createClass(t,[{key:"name",get:function(){return"Document"}},{key:"pageCount",get:function(){return this.children.reduce(function(t,e){return t+e.subpagesCount},0)}}]),t}();Document$2.defaultProps={author:null,keywords:null,subject:null,title:null};var ALMOST_ZERO=1e-6,Node$1=function(){function t(e,r){_classCallCheck(this,t),this._top=null,this._left=null,this._width=null,this._heigth=null,this._padding={},this._margin={},this.layout=Yoga.Node.createDefault()}return t.prototype.reset=function(){this.top=null,this.left=null,this.width=null,this.height=null,this.padding={},this.margin={}},_createClass(t,[{key:"top",get:function(){return this._top||(this._top=this.layout.getComputedLayout().top-this.marginTop),this._top},set:function(t){0===t&&(t=ALMOST_ZERO),this._top=t}},{key:"left",get:function(){return this._left||(this._left=this.layout.getComputedLayout().left-this.marginLeft),this._left},set:function(t){0===t&&(t=ALMOST_ZERO),this._left=t}},{key:"width",get:function(){return this._width||(this._width=this.layout.getComputedLayout().width+this.marginLeft+this.marginRight),this._width},set:function(t){0===t&&(t=ALMOST_ZERO),this._width=t}},{key:"height",get:function(){return this._heigth||(this._heigth=this.layout.getComputedLayout().height+this.marginTop+this.marginBottom),this._heigth},set:function(t){0===t&&(t=ALMOST_ZERO),this._heigth=t}},{key:"paddingTop",get:function(){return this._padding.top||(this._padding.top=this.layout.getComputedPadding(Yoga.EDGE_TOP)),this._padding.top},set:function(t){0===t&&(t=ALMOST_ZERO),this._padding.top=t}},{key:"paddingRight",get:function(){return this._padding.right||(this._padding.right=this.layout.getComputedPadding(Yoga.EDGE_RIGHT)),this._padding.right},set:function(t){0===t&&(t=ALMOST_ZERO),this._padding.right=t}},{key:"paddingBottom",get:function(){return this._padding.bottom||(this._padding.bottom=this.layout.getComputedPadding(Yoga.EDGE_BOTTOM)),this._padding.bottom},set:function(t){0===t&&(t=ALMOST_ZERO),this._padding.bottom=t}},{key:"paddingLeft",get:function(){return this._padding.left||(this._padding.left=this.layout.getComputedPadding(Yoga.EDGE_LEFT)),this._padding.left},set:function(t){0===t&&(t=ALMOST_ZERO),this._padding.left=t}},{key:"marginTop",get:function(){return this._margin.top||(this._margin.top=this.layout.getComputedMargin(Yoga.EDGE_TOP)),this._margin.top},set:function(t){0===t&&(t=ALMOST_ZERO),this._margin.top=t}},{key:"marginRight",get:function(){return this._margin.right||(this._margin.right=this.layout.getComputedMargin(Yoga.EDGE_RIGHT)),this._margin.right},set:function(t){0===t&&(t=ALMOST_ZERO),this._margin.right=t}},{key:"marginBottom",get:function(){return this._margin.bottom||(this._margin.bottom=this.layout.getComputedMargin(Yoga.EDGE_BOTTOM)),this._margin.bottom},set:function(t){0===t&&(t=ALMOST_ZERO),this._margin.bottom=t}},{key:"marginLeft",get:function(){return this._margin.left||(this._margin.left=this.layout.getComputedMargin(Yoga.EDGE_LEFT)),this._margin.left},set:function(t){0===t&&(t=ALMOST_ZERO),this._margin.left=t}},{key:"padding",get:function(){return{top:this.paddingTop,right:this.paddingRight,bottom:this.paddingBottom,left:this.paddingLeft}},set:function(t){this._padding=t}},{key:"margin",get:function(){return{top:this.marginTop,right:this.marginRight,bottom:this.marginBottom,left:this.marginLeft}},set:function(t){this._margin=t}}]),t}(),yogaValue=function(t,e){var r=function(t){return"alignItems"===t||"alignContent"===t||"alignSelf"===t};switch(e){case"auto":if("alignSelf"===t)return Yoga.ALIGN_AUTO;break;case"flex":return Yoga.DISPLAY_FLEX;case"none":return Yoga.DISPLAY_NONE;case"row":return Yoga.FLEX_DIRECTION_ROW;case"row-reverse":return Yoga.FLEX_DIRECTION_ROW_REVERSE;case"column":return Yoga.FLEX_DIRECTION_COLUMN;case"column-reverse":return Yoga.FLEX_DIRECTION_COLUMN_REVERSE;case"stretch":return Yoga.ALIGN_STRETCH;case"baseline":return Yoga.ALIGN_BASELINE;case"space-around":if("justifyContent"===t)return Yoga.JUSTIFY_SPACE_AROUND;if(r(t))return Yoga.ALIGN_SPACE_AROUND;break;case"space-between":if("justifyContent"===t)return Yoga.JUSTIFY_SPACE_BETWEEN;if(r(t))return Yoga.ALIGN_SPACE_BETWEEN;break;case"around":return Yoga.JUSTIFY_SPACE_AROUND;case"between":return Yoga.JUSTIFY_SPACE_BETWEEN;case"wrap":return Yoga.WRAP_WRAP;case"wrap-reverse":return Yoga.WRAP_WRAP_REVERSE;case"nowrap":return Yoga.WRAP_NO_WRAP;case"flex-start":if("justifyContent"===t)return Yoga.JUSTIFY_FLEX_START;if(r(t))return Yoga.ALIGN_FLEX_START;break;case"flex-end":if("justifyContent"===t)return Yoga.JUSTIFY_FLEX_END;if(r(t))return Yoga.ALIGN_FLEX_END;break;case"center":if("justifyContent"===t)return Yoga.JUSTIFY_CENTER;if(r(t))return Yoga.ALIGN_CENTER;break;default:return e}},hasOwnProperty=Object.prototype.hasOwnProperty,styleShortHands={margin:{marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0},marginHorizontal:{marginLeft:!0,marginRight:!0},marginVertical:{marginTop:!0,marginBottom:!0},padding:{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0},paddingHorizontal:{paddingLeft:!0,paddingRight:!0},paddingVertical:{paddingTop:!0,paddingBottom:!0},border:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0,borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0,borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0,borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderTop:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0},borderRight:{borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0},borderBottom:{borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0},borderLeft:{borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderColor:{borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0},borderRadius:{borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0},borderStyle:{borderTopStyle:!0,borderRightStyle:!0,borderBottomStyle:!0,borderLeftStyle:!0},borderWidth:{borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0}},expandStyles=function(t){if(!t)return t;for(var e=_Object$keys(t),r={},i=0;i<e.length;i++){var n=e[i],o=t[n];switch(n){case"display":case"flex":case"flexDirection":case"flexWrap":case"flexFlow":case"flexGrow":case"flexShrink":case"flexBasis":case"justifyContent":case"alignSelf":case"alignItems":case"alignContent":case"order":r[n]=yogaValue(n,o);break;case"textAlignVertical":r.verticalAlign="center"===o?"middle":o;break;case"margin":case"marginHorizontal":case"marginVertical":case"padding":case"paddingHorizontal":case"paddingVertical":case"border":case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":case"borderColor":case"borderRadius":case"borderStyle":case"borderWidth":var a=styleShortHands[n];for(var s in a)hasOwnProperty.call(a,s)&&(r[s]=o);break;default:r[n]=o}}return r},matchBorderShorthand=function(t){return t.match(/(\d+)px?\s(\S+)\s(\S+)/)},processBorders=function(t){for(var e=_Object$keys(t),r={},i=0;i<e.length;i++){var n=e[i],o=t[n];if("string"==typeof o&&n.match(/border/)){var a=matchBorderShorthand(o);if(a)if(n.match(/.Color/))r[n]=a[3];else if(n.match(/.Style/))r[n]=a[2];else{if(!n.match(/.Width/))throw new Error("StyleSheet: Invalid '"+o+"' for '"+n+"'");r[n]=a[1]}else r[n]=o}else r[n]=o}return r},transformStyles=function(t){return processBorders(expandStyles(t))},create=function(t){return t},flatten=function(t){return Array.isArray(t)||(t=[t]),t.reduce(function(t,e){return e&&_Object$keys(e).forEach(function(r){null===e[r]&&void 0===e[r]||(t[r]=e[r])}),t},{})},resolveMediaQueries=function(t,e){return _Object$keys(t).reduce(function(r,i){var n,o;return/@media/.test(i)?_extends({},r,matchMedia(((o={})[i]=t[i],o),e)):_extends({},r,((n={})[i]=t[i],n))},{})},resolve=function(t,e){return t?(t=flatten(t),t=resolveMediaQueries(t,e),transformStyles(t)):null},absoluteFillObject={position:"absolute",top:0,left:0,bottom:0,right:0},StyleSheet={hairlineWidth:1,create:create,resolve:resolve,flatten:flatten,absoluteFillObject:absoluteFillObject},Debug={debugText:function(t){this.root.fontSize(4),this.root.opacity(1),this.root.fillColor("black"),this.root.text(t.width+" x "+t.height,t.left,Math.max(t.top-4,0))},debugContent:function(t,e,r){this.root.fillColor("#a1c6e7"),this.root.opacity(.5),this.root.rect(t.left+r.left+e.left,t.top+r.top+e.top,t.width-r.left-r.right-e.left-e.right,t.height-r.top-r.bottom-e.top-e.bottom).fill()},debugPadding:function(t,e,r){this.root.fillColor("#c4deb9"),this.root.opacity(.5),this.root.rect(t.left+e.left+r.left,t.top+e.top,t.width-r.right-r.left-e.left-e.right,r.top).fill(),this.root.rect(t.left+e.left,t.top+e.top,r.left,t.height-e.top-e.bottom).fill(),this.root.rect(t.left+t.width-r.right-e.right,t.top+e.top,r.right,t.height-e.top-e.bottom).fill(),this.root.rect(t.left+r.left+e.left,t.top+t.height-r.bottom-e.bottom,t.width-r.right-r.left-e.left-e.right,r.bottom).fill()},debugMargin:function(t,e){this.root.fillColor("#f8cca1"),this.root.opacity(.5),this.root.rect(t.left+e.left,t.top,t.width-e.left-e.right,e.top).fill(),this.root.rect(t.left,t.top,e.left,t.height).fill(),this.root.rect(t.left+t.width-e.right,t.top,e.right,t.height).fill(),this.root.rect(t.left+e.left,t.top+t.height-e.bottom,t.width-e.left-e.right,e.bottom).fill()},debug:function(){var t=this.getAbsoluteLayout(),e=this.padding,r=this.margin;this.root.save(),this.debugContent(t,r,e),this.debugPadding(t,r,e),this.debugMargin(t,r),this.debugText(t),this.root.restore()}},Borders={traceBorder:function(t,e){switch(t){case"dashed":this.root.dash(2*e,{space:1.2*e}).stroke();break;case"dotted":this.root.dash(e,{space:1.2*e}).stroke();break;default:this.root.stroke()}},drawHorizontalBorder:function(t,e,r,i,n,o,a){n<=0||(this.root.lineWidth(n).moveTo(t[0],t[1]+r).quadraticCurveTo(t[0],t[1],t[0]+r,t[1]).lineTo(e[0]-i,e[1]).quadraticCurveTo(e[0],e[1],e[0],e[1]+i).strokeColor(o),this.traceBorder(a,n))},drawVerticalBorder:function(t,e,r,i,n,o,a){n<=0||(this.root.lineWidth(n).moveTo(t[0]+r,t[1]).quadraticCurveTo(t[0],t[1],t[0],t[1]-r).lineTo(e[0],e[1]+i).quadraticCurveTo(e[0],e[1],e[0]+i,e[1]).strokeColor(o),this.traceBorder(a,n))},drawBorders:function(){var t=this.margin,e=this.getAbsoluteLayout(),r=e.left,i=e.top,n=e.width,o=e.height,a=this.getComputedStyles(),s=a.borderTopWidth,h=void 0===s?0:s,u=a.borderRightWidth,l=void 0===u?0:u,c=a.borderBottomWidth,p=void 0===c?0:c,d=a.borderLeftWidth,f=void 0===d?0:d,g=a.borderTopLeftRadius,m=void 0===g?0:g,y=a.borderTopRightRadius,b=void 0===y?0:y,_=a.borderBottomRightRadius,E=void 0===_?0:_,v=a.borderBottomLeftRadius,R=void 0===v?0:v,C=a.borderTopColor,k=void 0===C?"black":C,T=a.borderRightColor,w=void 0===T?"black":T,L=a.borderBottomColor,S=void 0===L?"black":L,x=a.borderLeftColor,O=void 0===x?"black":x,P=a.borderTopStyle,A=void 0===P?"solid":P,I=a.borderRightStyle,D=void 0===I?"solid":I,B=a.borderBottomStyle,F=void 0===B?"solid":B,M=a.borderLeftStyle,G=void 0===M?"solid":M;this.root.save(),this.drawHorizontalBorder([r+t.left+(m>0?h/2:0),i+t.top+h/2],[r+n-t.right-(b>0?h/2:0),i+t.top+h/2],m,b,h,k,A),this.drawVerticalBorder([r+n-t.right-l/2,i+t.top+(b>0?l/2:0)],[r+n-t.right-l/2,i+o-t.bottom-(E>0?l/2:0)],-b,-E,l,w,D),this.drawHorizontalBorder([r+n-t.right-(E>0?p/2:0),i+o-t.bottom-p/2],[r+t.left+(R>0?p/2:0),i+o-t.bottom-p/2],-E,-R,p,S,F),this.drawVerticalBorder([r+t.left+f/2,i+o-t.bottom-(R>0?f/2:0)],[r+t.left+f/2,i+t.top+(m>0?f/2:0)],R,m,f,O,G),this.root.restore()}},PERCENT=/^(\d+)?%$/g,Base=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this));return n.root=r,n.parent=null,n.children=[],n.props=merge({},n.constructor.defaultProps,e.defaultProps,i),warning(!n.props.styles,'"styles" prop passed instead of "style" prop'),n.layout=Yoga.Node.createDefault(),n.canBeSplitted=!1,n}return _inherits(e,t),e.prototype.appendChild=function(t){t&&(t.parent=this,this.children.push(t),this.layout.insertChild(t.layout,this.layout.getChildCount()))},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1),this.layout.removeChild(t.layout))},e.prototype.moveTo=function(t){this.reset(),this.parent.removeChild(this),t.appendChild(this)},e.prototype.applyProps=function(){var t=this,e=this.page,r=e.size,i=e.orientation;this.style=this.style||StyleSheet.resolve(this.props.style,{width:r[0],height:r[1],orientation:i}),toPairsIn(this.style).map(function(e){var r=e[0],i=e[1];t.applyStyle(r,i)}),this.children.forEach(function(t){t.applyProps&&t.applyProps()})},e.prototype.setDimension=function(t,e){var r="set"+upperFirst(t),i=r+"Percent",n=PERCENT.exec(e);n?this.layout[i](parseInt(n[1],10)):this.layout[r](e)},e.prototype.setPosition=function(t,e){var r=PERCENT.exec(e);r?this.layout.setPositionPercent(t,parseInt(r[1],10)):this.layout.setPosition(t,e)},e.prototype.applyStyle=function(t,e){var r="set"+upperFirst(t);switch(t){case"marginTop":this.layout.setMargin(Yoga.EDGE_TOP,this.marginTop||e);break;case"marginRight":this.layout.setMargin(Yoga.EDGE_RIGHT,this.marginRight||e);break;case"marginBottom":this.layout.setMargin(Yoga.EDGE_BOTTOM,this.marginBottom||e);break;case"marginLeft":this.layout.setMargin(Yoga.EDGE_LEFT,this.marginLeft||e);break;case"paddingTop":this.layout.setPadding(Yoga.EDGE_TOP,this.paddingTop||e);break;case"paddingRight":this.layout.setPadding(Yoga.EDGE_RIGHT,this.paddingRight||e);break;case"paddingBottom":this.layout.setPadding(Yoga.EDGE_BOTTOM,this.paddingBottom||e);break;case"paddingLeft":this.layout.setPadding(Yoga.EDGE_LEFT,this.paddingLeft||e);break;case"borderTopWidth":this.layout.setBorder(Yoga.EDGE_TOP,e);break;case"borderRightWidth":this.layout.setBorder(Yoga.EDGE_RIGHT,e);break;case"borderBottomWidth":this.layout.setBorder(Yoga.EDGE_BOTTOM,e);break;case"borderLeftWidth":this.layout.setBorder(Yoga.EDGE_LEFT,e);break;case"position":this.layout.setPositionType("absolute"===e?Yoga.POSITION_TYPE_ABSOLUTE:Yoga.POSITION_TYPE_RELATIVE);break;case"top":this.setPosition(Yoga.EDGE_TOP,this.top||e);break;case"right":this.setPosition(Yoga.EDGE_RIGHT,this.right||e);break;case"bottom":this.setPosition(Yoga.EDGE_BOTTOM,this.bottom||e);break;case"left":this.setPosition(Yoga.EDGE_LEFT,this.left||e);break;case"width":this.setDimension(t,this[t]-this.marginLeft-this.marginRight||e);break;case"height":this.setDimension(t,this[t]-this.marginTop-this.marginBottom||e);break;case"minHeight":case"maxHeight":case"minWidth":case"maxWidth":this.setDimension(t,e);break;default:isFunction(this.layout[r])&&this.layout[r](e)}},e.prototype.isAbsolute=function(){return"absolute"===this.props.style.position},e.prototype.isEmpty=function(){return 0===this.children.length},e.prototype.recalculateLayout=function(){this.children.forEach(function(t){return t.recalculateLayout()})},e.prototype.getAbsoluteLayout=function(){var t=this.parent.margin||{left:0,top:0},e=this.parent.getAbsoluteLayout?this.parent.getAbsoluteLayout():{left:0,top:0};return{left:this.left+t.left+e.left,top:this.top+t.top+e.top,height:this.height,width:this.width}},e.prototype.getWidth=function(){return this.layout.getComputedWidth()+this.layout.getComputedMargin(Yoga.EDGE_LEFT)+this.layout.getComputedMargin(Yoga.EDGE_RIGTH)-this.layout.getComputedPadding(Yoga.EDGE_LEFT)-this.layout.getComputedPadding(Yoga.EDGE_RIGTH)},e.prototype.getHeight=function(){return this.layout.getComputedHeight()+this.layout.getComputedMargin(Yoga.EDGE_TOP)+this.layout.getComputedMargin(Yoga.EDGE_BOTTOM)-this.layout.getComputedPadding(Yoga.EDGE_TOP)-this.layout.getComputedPadding(Yoga.EDGE_BOTTOM)},e.prototype.getComputedStyles=function(){for(var t=this.parent,e={};t&&t.parent;)e=_extends({},t.parent.style,t.style,e),t=t.parent;return _extends({},pick(e,inheritedProperties),this.style)},e.prototype.drawBackgroundColor=function(){var t=this.margin,e=this.getAbsoluteLayout(),r=e.left,i=e.top,n=e.width,o=e.height,a=this.getComputedStyles(),s=Math.max(a.borderTopLeftRadius,a.borderTopRightRadius,a.borderBottomRightRadius,a.borderBottomLeftRadius)||0;a.backgroundColor&&this.root.fillColor(a.backgroundColor).roundedRect(r+t.left,i+t.top,n-t.left-t.right,o-t.top-t.bottom,s).fill()},e.prototype.wrapHeight=function(t){return Math.min(t,this.height)},e.prototype.clone=function(){var t=new this.constructor(this.root,this.props);return t.width=this.width,t.style=this.style,t.parent=this.parent,t.height=this.height,t.margin=this.margin,t.padding=this.padding,t},e.prototype.renderChildren=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(e){var r,i,n,o;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.children.filter(function(t){return t.isAbsolute()}),i=this.children.filter(function(t){return!t.isAbsolute()}),n=0;case 3:if(!(n<i.length)){t.next=9;break}return t.next=6,i[n].render(e);case 6:n++,t.next=3;break;case 9:o=0;case 10:if(!(o<r.length)){t.next=16;break}return t.next=13,r[o].render(e);case 13:o++,t.next=10;break;case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_createClass(e,[{key:"page",get:function(){return this.parent.page}}]),e}(Node$1);Base.defaultProps={style:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0},minPresenceAhead:0},_Object$assign(Base.prototype,Debug),_Object$assign(Base.prototype,Borders);var SubPage=function(t){function e(r,i,n){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,r,i));return o._number=n,o}return _inherits(e,t),e.prototype.resetMargins=function(){(this.style.marginTop||this.style.marginBottom||this.style.marginLeft||this.style.marginRight)&&(warning(!1,"Margin values are not allowed on Page element. Use padding instead."),this.style.marginTop=0,this.style.marginBottom=0,this.style.marginLeft=0,this.style.marginRight=0)},e.prototype.applyProps=function(){if(t.prototype.applyProps.call(this),this.resetMargins(),this.props.size){var e=this.size;"landscape"===this.props.orientation?(this.layout.setWidth(e[1]),this.layout.setHeight(e[0])):(this.layout.setWidth(e[0]),this.layout.setHeight(e[1]))}},e.prototype.recalculateLayout=function(){t.prototype.recalculateLayout.call(this),this.layout.calculateLayout()},e.prototype.isEmpty=function(){var t=this.children.filter(function(t){return!t.props.fixed});return 0===t.length||t.every(function(t){return t.isEmpty()})},e.prototype.wrap=function(t){this.layout.calculateLayout();var e=[],r=this.clone();r._number=this._number+1;for(var i=0;i<this.children.length;i++){var n=this.children[i],o=n.props,a=o.fixed,s=o.wrap,h=o.minPresenceAhead,u=t<n.top,l=t<n.top+n.height-this.paddingTop;if(a){var c=n.clone();c.children=n.children,r.appendChild(c)}else if(u)e.push(n);else{if(n.props.break){n.props.break=!1,e.push.apply(e,this.children.slice(i));break}if(h){for(var p=1,d=0,f=this.children[i+p],g=t>f.top;f&&g;)g=t>f.top,d+=f.wrapHeight(t-f.top-this.marginTop),f=this.children[i+p++];if(d<h){e.push.apply(e,this.children.slice(i));break}}else if(l){var m=t-n.top+this.paddingTop;s?r.appendChild(n.splice(m,t)):e.push(n)}}}return e.forEach(function(t){return t.moveTo(r)}),r.applyProps(),r},e.prototype.callChildFunctions=function(){for(var t=this.children.slice(0);t.length>0;){var e=t.shift(),r=this.page.document.pageCount;if(e.renderCallback){var i=e.renderCallback({totalPages:r,pageNumber:this.number});e.renderCallback=null,e.children=[i]}else e.children&&t.push.apply(t,e.children)}},e.prototype.layoutFixedElements=function(){this.reset(),this.recalculateLayout(),this.children.forEach(function(t){t.props.fixed&&t.reset()})},e.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(e){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.root.addPage({size:this.size,layout:this.props.orientation,margin:0}),this.callChildFunctions(),this.layoutFixedElements(),this.style.backgroundColor&&this.root.fillColor(this.style.backgroundColor).rect(0,0,this.root.page.width,this.root.page.height).fill(),this.props.debug&&this.debug(),t.next=7,this.renderChildren(e);case 7:this.page.renderRuler();case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_createClass(e,[{key:"name",get:function(){return"SubPage"}},{key:"page",get:function(){return this.parent}},{key:"size",get:function(){return this.parent.size}},{key:"style",get:function(){return this.parent.style},set:function(t){return t}},{key:"number",get:function(){return this._number+this.page.numberOffset}}]),e}(Base),sizes={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},RULER_WIDTH=13,RULER_COLOR="white",RULER_FONT_SIZE=5,DEFAULT_RULER_STEPS=50,LINE_WIDTH=.5,LINE_COLOR="gray",GRID_COLOR="#ababab",range=function(t,e){return _Array$from({length:Math.ceil(t/e)},function(t,r){return r*e})},matchPercentage=function(t){var e=t.match(/(\d+\.?\d*)%/);return e?100/parseFloat(e[1],10):null},Ruler={getRulerWidth:function(){return RULER_WIDTH},hasHorizontalRuler:function(){return this.props.ruler||this.props.horizontalRuler},hasVerticalRuler:function(){return this.props.ruler||this.props.verticalRuler},getHorizontalSteps:function(){var t=this.props.horizontalRulerSteps||this.props.rulerSteps||DEFAULT_RULER_STEPS;if("string"==typeof t){var e=matchPercentage(t);if(e)return(this.width-(this.hasVerticalRuler()?RULER_WIDTH:0))/e;throw new Error("Page: Invalid horizontal steps value")}return t},getVerticalSteps:function(){var t=this.props.verticalRulerSteps||this.props.rulerSteps||DEFAULT_RULER_STEPS;if("string"==typeof t){var e=matchPercentage(t);if(e)return(this.height-(this.hasHorizontalRuler()?RULER_WIDTH:0))/e;throw new Error("Page: Invalid horizontal steps value")}return t},renderRuler:function(){this.root.save().lineWidth(LINE_WIDTH).fontSize(RULER_FONT_SIZE).opacity(1),this.hasHorizontalRuler()&&this.drawHorizontalRuler(),this.hasVerticalRuler()&&this.drawVerticalRuler(),this.hasHorizontalRuler()&&this.hasVerticalRuler()&&this.root.rect(0,0,RULER_WIDTH-LINE_WIDTH,RULER_WIDTH-LINE_WIDTH).fill(RULER_COLOR),this.root.restore()},drawHorizontalRuler:function(){var t=this,e=this.hasVerticalRuler()?RULER_WIDTH:0;this.root.rect(e,0,this.width,RULER_WIDTH).fill(RULER_COLOR).moveTo(this.hasVerticalRuler()?RULER_WIDTH:0,RULER_WIDTH).lineTo(this.width,RULER_WIDTH).stroke(LINE_COLOR);var r=range(this.width,this.getHorizontalSteps());r.map(function(r){t.root.moveTo(e+r,0).lineTo(e+r,RULER_WIDTH).stroke(LINE_COLOR).fillColor("black").text(""+Math.round(r),e+r+1,1)}),r.map(function(r){0!==r&&t.root.moveTo(e+r,RULER_WIDTH).lineTo(e+r,t.height).stroke(GRID_COLOR)})},drawVerticalRuler:function(){var t=this,e=this.hasHorizontalRuler()?RULER_WIDTH:0;this.root.rect(0,e,RULER_WIDTH,this.height).fill(RULER_COLOR).moveTo(RULER_WIDTH,this.hasHorizontalRuler()?RULER_WIDTH:0).lineTo(RULER_WIDTH,this.height).stroke(LINE_COLOR);var r=range(this.height,this.getVerticalSteps());r.map(function(r){t.root.moveTo(0,e+r).lineTo(RULER_WIDTH,e+r).stroke(LINE_COLOR).fillColor("black").text(""+Math.round(r),1,e+r+1)}),r.map(function(r){0!==r&&t.root.moveTo(RULER_WIDTH,e+r).lineTo(t.width,e+r).stroke(GRID_COLOR)})}},Page$1=function(){function t(e,r){_classCallCheck(this,t),this.root=e,this.parent=null,this.props=_extends({},t.defaultProps,r),this.previousPage=null,this.children=[],this._size=null,this.addInitialSubpage()}return t.prototype.applyProps=function(){this.style=StyleSheet.resolve(this.props.style);var t=this.getRulerWidth(),e=this.style,r=e.paddingTop,i=void 0===r?0:r,n=e.paddingLeft,o=void 0===n?0:n;this.hasHorizontalRuler()&&(this.style.paddingTop=i+t),this.hasVerticalRuler()&&(this.style.paddingLeft=o+t);for(var a=0;a<this.children.length;a++)this.children[a].applyProps()},t.prototype.addInitialSubpage=function(){var t=new SubPage(this.root,this.props,1);t.parent=this,this.children.push(t)},t.prototype.appendChild=function(t){this.children[0].appendChild(t)},t.prototype.removeChild=function(t){this.children[0].removeChild(t)},t.prototype.wrapPage=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e,r,i,n,o,a,s;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.style,r=e.paddingTop,i=void 0===r?0:r,n=e.paddingBottom,o=void 0===n?0:n,a=this.height-i-o,s=this.initialSubpage.wrap(a);this.props.wrap&&!s.isEmpty();)this.children.push(s),s=s.wrap(a);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.children.length)){t.next=7;break}return t.next=4,this.children[e].render(this);case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),_createClass(t,[{key:"name",get:function(){return"Page"}},{key:"document",get:function(){return this.parent}},{key:"orientation",get:function(){return this.props.orientation}},{key:"initialSubpage",get:function(){return this.children[0]}},{key:"subpagesCount",get:function(){return this.children.length}},{key:"numberOffset",get:function(){for(var t=0,e=this.previousPage;e;)t+=e.subpagesCount,e=e.previousPage;return t}},{key:"width",get:function(){return this.size[0]}},{key:"height",get:function(){return this.size[1]}},{key:"padding",get:function(){return{top:this.style.paddingTop||0,right:this.style.paddingRight||0,bottom:this.style.paddingBottom||0,left:this.style.paddingLeft||0}}},{key:"size",get:function(){if(this._size)return this._size;var t=this.props.size;if("string"==typeof t)this._size=sizes[t.toUpperCase()];else if(Array.isArray(t))this._size=t;else{if("object"!==(void 0===t?"undefined":_typeof(t))||!t.width||!t.height)throw new Error("Invalid Page size: "+t);this._size=[t.width,t.height]}return this.hasHorizontalRuler()&&(this._size[0]+=this.getRulerWidth()),this.hasVerticalRuler()&&(this._size[1]+=this.getRulerWidth()),this._size}}]),t}();Page$1.defaultProps={size:"A4",orientation:"portrait",style:{},wrap:!1},_Object$assign(Page$1.prototype,Ruler);var View$1=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(e,t),e.prototype.isEmpty=function(){return 0!==this.children.length&&this.children.every(function(t){return t.isEmpty()})},e.prototype.wrapHeight=function(t){if(!this.props.wrap&&t<this.height)return 0;for(var e=0,r=0;r<this.children.length&&!(this.children.height>t);r++)e+=this.children.height;return e},e.prototype.splice=function(t,e){for(var r=[],i=this.clone(),n=0;n<this.children.length;n++){var o=this.children[n],a=o.props,s=a.fixed,h=a.wrap,u=a.minPresenceAhead,l=t<o.top,c=t<o.top+o.height;if(l)r.push(o);else if(s){var p=o.clone();p.children=o.children,i.appendChild(p)}else{if(o.props.break){o.props.break=!1,r.push.apply(r,this.children.slice(n));break}if(u){for(var d=1,f=0,g=this.children[n+d],m=t>g.top;g&&m;)m=t>g.top,f+=g.wrapHeight(t-g.top-this.marginTop),g=this.children[n+d++];if(f<u){r.push.apply(r,this.children.slice(n));break}}else if(c){var y=t-o.top-this.marginTop;h?i.appendChild(o.splice(y,e)):r.push(o)}}}r.forEach(function(t){return t.moveTo(i)});var b=this.style.height?t:NaN;return i.marginTop=0,i.paddingTop=0,i.height=this.height-b,this.marginBottom=0,this.paddingBottom=0,this.height=b,i},e.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(e){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.drawBackgroundColor(),this.drawBorders(),this.props.debug&&this.debug(),t.next=5,this.renderChildren(e);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_createClass(e,[{key:"name",get:function(){return"View"}}]),e}(Base);View$1.defaultProps={style:{},wrap:!0};var IGNORABLE_CODEPOINTS=[8232,8233],buildSubsetForFont=function(t){return IGNORABLE_CODEPOINTS.reduce(function(e,r){return t.hasGlyphForCodePoint&&t.hasGlyphForCodePoint(r)?e:[].concat(e,[String.fromCharCode(r)])},[])},ignoreChars=function(t){return t.map(function(t){var e=buildSubsetForFont(t.attributes.font),r=new RegExp(e.join("|"));return{string:t.string.replace(r,""),attributes:t.attributes}})},LAYOUT_ENGINE=void 0,INFINITY=99999,PDFRenderer$2=createPDFRenderer({Rect:Rect}),TextEngine=function(){function t(e){_classCallCheck(this,t),this.element=e,this._container=null,this.start=0,this.end=0,this.computed=!1,this.preprocessors=[ignoreChars,embedEmojis]}return t.prototype.lineIndexAtHeight=function(t){for(var e=0,r=0;r<this.lines.length;r++){var i=this.lines[r];if(e+i.height>t)return r;e+=i.height}return this.lines.length},t.prototype.heightAtLineIndex=function(t){for(var e=0,r=0;r<=t;r++){e+=this.lines[r].height}return e},t.prototype.splice=function(t){var e=this.clone(),r=this.lineIndexAtHeight(t);return e.start=r,e.end=this.end,this.end=r,e},t.prototype.clone=function(){var e=new t(this.element);return e.computed=this.computed,e._container=this._container,e},t.prototype.transformText=function(t,e){switch(e){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();case"capitalize":return upperFirst(t);default:return t}},t.prototype.layout=function(t,e){if(!this.computed){var r=(new Path).rect(0,0,t,INFINITY),i=new Container(r),n=AttributedString.fromFragments(this.attributedString).trim();this.layoutEngine.layout(n,[i]);var o=i.blocks.reduce(function(t,e){return t+e.lines.length},0);this.computed=!0,this._container=i,this.end=o+1}},t.prototype.render=function(){var t=this.element.margin,e=this.element.padding,r=this.element.getAbsoluteLayout(),i=r.top,n=r.left,o=this.lines[0]?this.lines[0].rect.y:0;this.lines.forEach(function(r){r.rect.x+=n+t.left+e.left,r.rect.y+=i+t.top+e.top-o}),new PDFRenderer$2(this.element.root,{outlineLines:!1}).render(this.container)},_createClass(t,[{key:"container",get:function(){var t=this._container.blocks.reduce(function(t,e){return[].concat(t,e.lines)},[]);return _extends({},this._container,{blocks:[{lines:t.splice(this.start,this.end)}]})}},{key:"layoutEngine",get:function(){return LAYOUT_ENGINE||(LAYOUT_ENGINE=new LayoutEngine$1({hyphenationCallback:Font.getHyphenationCallback()})),LAYOUT_ENGINE}},{key:"lines",get:function(){return this.container?this.container.blocks.reduce(function(t,e){return[].concat(t,e.lines)},[]):[]}},{key:"height",get:function(){return this._container?this.lines.reduce(function(t,e){return t+e.height},0):-1}},{key:"width",get:function(){return this._container?Math.max.apply(Math,this.lines.map(function(t){return t.advanceWidth})):-1}},{key:"attributedString",get:function(){var t=this,e=[],r=this.element.getComputedStyles(),i=r.color,n=void 0===i?"black":i,o=r.fontFamily,a=void 0===o?"Helvetica":o,s=r.fontSize,h=void 0===s?18:s,u=r.textAlign,l=void 0===u?"left":u,c=r.position,p=r.top,d=r.bottom,f=r.align,g=r.lineHeight,m=r.textDecoration,y=r.textDecorationColor,b=r.textDecorationStyle,_=r.textTransform;warning(!f,'"align" style prop will be deprecated on future versions. Please use "textAlign" instead in Text node'),this.element.children.forEach(function(r){if("string"==typeof r){var i=Font.getFont(a),o=i?i.data:a,s=t.transformText(r,_);e.push({string:s,attributes:{font:o,color:n,fontSize:h,align:l,link:t.element.src,underlineStyle:b,underline:"underline"===m,underlineColor:y||n,lineHeight:g?g*h:null,yOffset:"relative"===c?-p||d||0:null}})}else{var u;if(r.engine)(u=e).push.apply(u,r.engine.attributedString)}});var E=this.preprocessors,v=Array.isArray(E),R=0;for(E=v?E:_getIterator(E);;){var C;if(v){if(R>=E.length)break;C=E[R++]}else{if((R=E.next()).done)break;C=R.value}e=C(e)}return e}}]),t}(),WIDOW_THREASHOLD=20,Text$1=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r,i));return n.engine=new TextEngine(n),n.layout.setMeasureFunc(n.measureText.bind(n)),n.renderCallback=i.render,n}return _inherits(e,t),e.prototype.appendChild=function(t){"string"==typeof t?this.children.push(t):(t.parent=this,this.children.push(t))},e.prototype.removeChild=function(t){this.children=null},e.prototype.measureText=function(t,e,r,i){return this.renderCallback?{}:e===Yoga.MEASURE_MODE_EXACTLY?(this.engine.layout(t),{height:this.style.flexGrow?NaN:this.engine.height}):e===Yoga.MEASURE_MODE_AT_MOST||i===Yoga.MEASURE_MODE_AT_MOST?(this.engine.layout(t),{height:this.engine.height,width:Math.min(t,this.engine.width)}):{}},e.prototype.getComputedStyles=function(){var e=t.prototype.getComputedStyles.call(this);return"Text"===this.parent.name&&"relative"===this.parent.style.position&&(e.top=e.top||this.parent.style.top,e.bottom=e.bottom||this.parent.style.bottom,e.position=e.position||"relative"),e},e.prototype.recalculateLayout=function(){this.layout.markDirty()},e.prototype.isEmpty=function(){return 0===this.engine.lines.length},e.prototype.hasOrphans=function(t,e){return 1===e&&1!==t},e.prototype.hasWidows=function(t,e){return 1!==t&&t-e==1&&t<WIDOW_THREASHOLD},e.prototype.wrapHeight=function(t){var e=this.props,r=e.orphans,i=e.widows,n=this.engine.lines.length,o=t-this.marginTop-this.paddingTop,a=this.engine.lineIndexAtHeight(o),s=t;return n<r?s=t:a<r||n<r+i?s=0:n===r+i?s=this.engine.heightAtLineIndex(r-1):n-a<i&&(s=t-this.engine.heightAtLineIndex(i-1)),Math.min(s,this.height)},e.prototype.splice=function(t){var e=this.wrapHeight(t),r=this.engine.splice(e),i=this.clone();return i.marginTop=0,i.paddingTop=0,i.width=this.width,i.marginBottom=this.marginBottom,i.engine=r,i.engine.element=i,i.height=r.height+this.paddingBottom+this.marginBottom,this.marginBottom=0,this.paddingBottom=0,this.height=t,i},e.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(e){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.drawBackgroundColor(),this.drawBorders(),this.engine.computed||this.engine.layout(this.width-this.margin.left-this.margin.right-this.padding.left-this.padding.right),this.props.debug&&this.debug(),this.engine.render();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_createClass(e,[{key:"name",get:function(){return"Text"}},{key:"src",get:function(){return null}}]),e}(Base);Text$1.defaultProps={wrap:!0,widows:2,orphans:2};var PROTOCOL_REGEXP=/^(http|https|ftp|ftps|mailto)\:\/\//i,Link$1=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"name",get:function(){return"Link"}},{key:"src",get:function(){var t=this.props.src;return"string"!=typeof t||t.match(PROTOCOL_REGEXP)||(t="http://"+t),t}}]),e}(Text$1);Link$1.defaultProps={style:{color:"blue",textDecoration:"underline"}};var SAFETY_HEIGHT=10,Image$1=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r,i));return n.image=null,n.layout.setMeasureFunc(n.measureImage.bind(n)),n}return _inherits(e,t),e.prototype.shouldGrow=function(){return!!this.getComputedStyles().flexGrow},e.prototype.measureImage=function(t,e,r,i){var n=this.margin,o=this.page.padding,a=this.page.height-o.top-o.bottom-n.top-n.bottom-SAFETY_HEIGHT;if(e===Yoga.MEASURE_MODE_EXACTLY&&i===Yoga.MEASURE_MODE_UNDEFINED){var s=t/this.ratio;return{height:Math.min(a,s)}}if(i===Yoga.MEASURE_MODE_EXACTLY&&(e===Yoga.MEASURE_MODE_AT_MOST||e===Yoga.MEASURE_MODE_UNDEFINED))return{width:Math.min(r*this.ratio,t)};if(e===Yoga.MEASURE_MODE_EXACTLY&&i===Yoga.MEASURE_MODE_AT_MOST){var h=t/this.ratio;return{height:Math.min(r,a,h)}}if(e===Yoga.MEASURE_MODE_AT_MOST&&i===Yoga.MEASURE_MODE_AT_MOST){var u=Math.min(this.image.width,t);return{width:u,height:u/this.ratio}}return{height:r,width:t}},e.prototype.isEmpty=function(){return!1},e.prototype.fetch=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetchImage(this.props.src);case 3:this.image=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),this.image={width:0,height:0},console.warn(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}(),e.prototype.render=function(){var t=_asyncToGenerator(_regeneratorRuntime.mark(function t(){var e,r,i,n,o,a,s,h,u;return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.margin,r=this.padding,i=this.getAbsoluteLayout(),n=i.left,o=i.top,this.drawBackgroundColor(),this.drawBorders(),this.props.debug&&this.debug(),this.image.data&&(a=this.width-e.right-e.left,s=this.height-e.top-e.bottom,h=Math.min(s*this.ratio,a),u=Math.max((a-h)/2,0),this.root.image(this.image.data,n+r.left+e.left+u,o+r.top+e.top,{width:h-r.left-r.right,height:s-r.top-r.bottom}));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),_createClass(e,[{key:"name",get:function(){return"Image"}},{key:"ratio",get:function(){return this.image.data?this.image.width/this.image.height:1}}]),e}(Base);function createElement(t,e,r){var i=void 0;switch(t){case"ROOT":i=new PDFDocument({autoFirstPage:!1});break;case"DOCUMENT":i=new Document$2(r,e);break;case"PAGE":i=new Page$1(r,e);break;case"TEXT":i=new Text$1(r,e);break;case"LINK":i=new Link$1(r,e);break;case"IMAGE":i=new Image$1(r,e);break;case"VIEW":i=new View$1(r,e);break;default:i=void 0}return i}Image$1.defaultProps={wrap:!1};var PDFRenderer=ReactFiberReconciler({appendInitialChild:function(t,e){t.appendChild?t.appendChild(e):t.document=e},createInstance:function(t,e,r){return createElement(t,e,r)},createTextInstance:function(t,e,r){return t},finalizeInitialChildren:function(t,e,r){return!1},getPublicInstance:function(t){return t},prepareForCommit:function(){},prepareUpdate:function(t,e,r,i){return!0},resetAfterCommit:function(){},resetTextContent:function(t){},getRootHostContext:function(){return emptyObject},getChildHostContext:function(){return emptyObject},shouldSetTextContent:function(t,e){return!1},now:function(){},useSyncScheduling:!0,mutation:{appendChild:function(t,e){t.appendChild?t.appendChild(e):t.document=e},appendChildToContainer:function(t,e){t.appendChild?t.appendChild(e):t.document=e},insertBefore:function(t,e,r){},insertInContainerBefore:function(t,e,r){},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){t.removeChild&&t.removeChild(e)},commitTextUpdate:function(t,e,r){r},commitMount:function(t,e,r){},commitUpdate:function(t,e,r,i,n){}}}),View="VIEW",Text="TEXT",Link="LINK",Page="PAGE",Image="IMAGE",Document$1="DOCUMENT",pdf=function(t){var e,r,i,n=(e=_asyncToGenerator(_regeneratorRuntime.mark(function e(){var r;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.document.render();case 2:return r=t.pipe(BlobStream()),e.abrupt("return",new _Promise(function(e,i){r.on("finish",function(){var i=r.toBlob("application/pdf");t.document.props.onRender&&t.document.props.onRender({blob:i}),e(i)}),r.on("error",i)}));case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)});return{toBuffer:(r=_asyncToGenerator(_regeneratorRuntime.mark(function e(){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.document.render();case 2:return t.document.props.onRender&&t.document.props.onRender(),e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),toBlob:n,toString:(i=_asyncToGenerator(_regeneratorRuntime.mark(function e(){var r,i;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="",i=t.document.render(),e.abrupt("return",new _Promise(function(e){i.on("data",function(t){r+=t}),i.on("end",function(){t.document.props.onRender&&t.document.props.onRender({string:r}),e(r)})}));case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})}},Document$$1=function(t){function e(r){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,r));return i.container=createElement("ROOT"),i.state={document:void 0},i}return _inherits(e,t),e.prototype.componentDidMount=function(){var t=this;this.mountNode=PDFRenderer.createContainer(this.container);var e=this.props,r=(e.height,e.width,e.children,e.filename),i=_objectWithoutProperties(e,["height","width","children","filename"]);PDFRenderer.updateContainer(React.createElement(Document$1,i,this.props.children),this.mountNode,this),pdf(this.container).toBlob().then(function(e){navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(e,r||"print.pdf"):t.embed.src=URL.createObjectURL(e)})},e.prototype.componentDidUpdate=function(){var t=this.props,e=(t.height,t.width,t.children,_objectWithoutProperties(t,["height","width","children"]));PDFRenderer.updateContainer(React.createElement(Document$1,e,this.props.children),this.mountNode,this)},e.prototype.componentWillUnmount=function(){PDFRenderer.updateContainer(null,this.mountNode,this)},e.prototype.render=function(){var t=this,e=this.props,r=e.className,i=e.width,n=void 0===i?null:i,o=e.height,a=void 0===o?null:o,s=e.style;return React.createElement("iframe",{className:r,ref:function(e){t.embed=e},style:Array.isArray(s)?_extends({width:n,height:a},flatStyles(s)):_extends({width:n,height:a},s)})},e}(Component);Document$$1.displayName="Document",Document$$1.defaultProps={style:{}};var dom={pdf:pdf,View:View,Text:Text,Link:Link,Page:Page,Font:Font,Image:Image,Document:Document$$1,StyleSheet:StyleSheet,PDFRenderer:PDFRenderer,createElement:createElement};export{Document$$1 as Document,pdf,View,Text,Link,Page,Font,Image,StyleSheet,PDFRenderer,createElement};export default dom;
//# sourceMappingURL=react-pdf.browser.es.min.js.map
